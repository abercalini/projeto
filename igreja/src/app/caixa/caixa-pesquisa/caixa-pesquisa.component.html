<br>
<br>
<br>
<br>

    <form #inputCaixa="ngForm" (ngSubmit)="listar()">
       
              <div class="ui-g">
                  <div class="ui-g-12 ui-md-12 ui-fluid">
                        <p-table [value]="caixas" [paginator]="true" [responsive]="true" [rows]="10" #tabela >
                          <ng-template pTemplate="header">
                              <tr>
                                  <th style="width: 80px;">#</th>
                                  <th style="width: 300px;">Nome</th>
                                  <th style="width: 150px;">Data Abertura</th>
                                  <th style="width: 140px;">Data Fechamento</th>
                                  <th style="width: 140px;">Saldo Abertura</th>
                                  <th style="width: 140px;">Saldo Receita</th>
                                  <th style="width: 140px;">Saldo Despesa</th>
                                  <th style="width: 140px;">Saldo</th>
                                  <th style="width: 140px;">Status</th>
                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-c>
                              <tr>
                                  <td>{{c.codigo}}</td>
                                  <td>{{c.nome}}</td>
                                  <td>{{c.dataAbertura | date: 'dd/MM/yyyy'}}</td>
                                  <td>{{c.dataFechamento | date: 'dd/MM/yyyy'}}</td>
                                  <td>{{c.saldoAbertura | number: '1.2-2'}}</td>
                                  <td>{{c.valorReceita | number: '1.2-2'}}</td>
                                  <td>{{c.valorDespesas | number: '1.2-2'}}</td>
                                  <td>{{c.saldoFechamento | number: '1.2-2'}}</td>
                                  <td><a href="#" routerLink="/caixa" #status (click)="showDialog(c.status, c.codigo)" style="color: black;" pTooltip="{{c.status === false ? 'Abrir Caixa' : 'Fechar Caixa'}}" tooltipPosition="top">{{c.status === false ? 'Fechado' : 'Aberto'}}</a></td>
                                </tr>
                          </ng-template>
                        </p-table>
                  </div>
              </div>
              
              <div class="ui-g">
                  <div class="ui-g-12 ui-md-12">
                      <a href="#" routerLink="/caixa/novo">Cadastrar novo caixa</a>
                  </div>
              </div>

              <p-dialog header="{{status !== false ? 'Fechar Caixa' : 'Abrir Caixa'}}" [(visible)]="display" [modal]="true" [responsive]="true" [style]="{width: '350px', minWidth: '200px'}" [minY]="70" 
                    [maximizable]="true" [baseZIndex]="10000">

                        <div class="ui-g">
                            <div class="ui-g-12 ui-md-12 ui-fluid">
                                <div *ngIf="status !== false">
                                    <button pButton type="button" label="Fechar Caixa" icon="ui-icon-close" (click)="alterarStatus()" ></button>
                                </div>

                                <div *ngIf="status !== true">
                                    <button pButton type="button" label="Abrir Caixa" icon="ui-icon-folder-open" (click)="alterarStatus()"></button>
                                </div>
                            </div>
                        </div>

              </p-dialog>
              
              <div class="ui-g">
                    <div class="ui-g-12 ui-md-12 ui-fluid">
                        <p-confirmDialog #cd header="Confirmar" icon="pi pi-exclamation-triangle">
                            <p-footer>
                                <button type="button" pButton icon="pi pi-check" label="Sim" (click)="cd.accept()" class="ui-button-success"></button>
                                <button type="button" pButton icon="pi pi-times" label="NÃ£o" (click)="cd.reject()"></button>
                            </p-footer>
                        </p-confirmDialog>
                    </div>
                </div>
                
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-12">
                            <p-toast position="bottom-left"></p-toast>
                    </div>
                </div>
    </form>
